import{A as _,S as $,T,C as j,a as R,b as k,P as AA}from"./vendor.f765fced.js";const eA=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerpolicy&&(n.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?n.credentials="include":l.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(l){if(l.ep)return;l.ep=!0;const n=t(l);fetch(l.href,n)}};eA();function tA(){const A=new _({width:620,height:440,transparent:!1,resolution:1});return A.renderer.backgroundColor=0,document.body.appendChild(A.view),A}var oA="/assets/leaf.d96033b0.svg";function lA(A,e){const t=A,o=e,l=[t,o];let n,s,i,c,d,r;for(let y=0;y<l.length;y++){let g=l[y];for(let m=0;m<g.length;m+=2){const X=(m+2)%g.length,B={x:g[X+1]-g[m+1],y:g[m]-g[X]};for(n=s=null,r=0;r<t.length;r+=2)i=B.x*t[r]+B.y*t[r+1],(n===null||i<n)&&(n=i),(s===null||i>s)&&(s=i);for(c=d=null,r=0;r<o.length;r+=2)i=B.x*o[r]+B.y*o[r+1],(c===null||i<c)&&(c=i),(d===null||i>d)&&(d=i);if(s<c||d<n)return!1}}return!0}class F extends ${collides(e){let t=this.getLeafPoints();return lA(t,e)}getLeafPoints(){const e=this,t=100/2,o=125/2,{x:l,y:n}=e.toGlobal({x:0,y:-o/2}),{x:s,y:i}=e.toGlobal({x:t/2,y:0}),{x:c,y:d}=e.toGlobal({x:0,y:o/2}),{x:r,y}=e.toGlobal({x:-t/2,y:0});return[l,n,s,i,c,d,r,y]}}let h;const x=Math.PI;let L;const nA=A=>{L=A},sA=A=>{const e=T.from(oA);let t=new j;t.x=A.screen.width/2,t.y=A.screen.height/2;const o=new F(e);o.anchor.x=.5,o.anchor.y=.5,o.scale.x=.5,o.scale.y=.5,t.addChild(o),o.name="LEAF",h=t,h.rotation=x,A.stage.addChild(h),fA(h,A.screen.width)},iA=()=>h.y-.5*h.height,rA=A=>{h.x=A.screen.width/2,h.y=A.screen.height/2,document.addEventListener("keydown",M),document.addEventListener("keyup",N),L(6),v.start()},b=[.4,.2,-.2,-.4];let W=Math.floor(b.length/2);const cA=b.length-1,aA=0,O=A=>{h.rotation=x+Math.PI*b[A]},dA=()=>{W!==aA&&O(--W)},hA=()=>{W!==cA&&O(++W)};let Y=!1,I;const M=A=>{if(Y)return;Y=!0,clearTimeout(I),I=setTimeout(function t(){!Y||(e(),I=setTimeout(t,125))},50);function e(){(A.code==="KeyA"||A.code==="ArrowLeft")&&dA(),(A.code==="KeyD"||A.code==="ArrowRight")&&hA()}},N=()=>{clearTimeout(I),Y=!1};let v;const fA=(A,e)=>{v=R.shared.add(()=>{const o=A.getChildAt(0),l=p(0),n=p(1);if(o.collides(l)||o.collides(n)||t(e)){uA();return}A.x=A.x+(A.rotation-x)/Math.PI*-12;const s=8;let i=Math.abs(A.rotation-x)/Math.PI;const c=s-i*s;L(c)});function t(o){const l=A.x+A.width/2,n=A.x-A.width/2,s=20,i=o-s,c=s,d=l>=i,r=n<=c;return d||r}},gA=()=>{v&&v.stop(),L(0)},uA=()=>{jA(),document.removeEventListener("keydown",M),document.removeEventListener("keyup",N)};document.addEventListener("keydown",M);document.addEventListener("keyup",N);var wA="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gIoSUNDX1BST0ZJTEUAAQEAAAIYAAAAAAIQAABtbnRyUkdCIFhZWiAAAAAAAAAAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAAHRyWFlaAAABZAAAABRnWFlaAAABeAAAABRiWFlaAAABjAAAABRyVFJDAAABoAAAAChnVFJDAAABoAAAAChiVFJDAAABoAAAACh3dHB0AAAByAAAABRjcHJ0AAAB3AAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAFgAAAAcAHMAUgBHAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z3BhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADTLW1sdWMAAAAAAAAAAQAAAAxlblVTAAAAIAAAABwARwBvAG8AZwBsAGUAIABJAG4AYwAuACAAMgAwADEANv/bAEMAEAsMDgwKEA4NDhIREBMYKBoYFhYYMSMlHSg6Mz08OTM4N0BIXE5ARFdFNzhQbVFXX2JnaGc+TXF5cGR4XGVnY//bAEMBERISGBUYLxoaL2NCOEJjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY//AABEIAB4AbwMBIgACEQEDEQH/xAAZAAACAwEAAAAAAAAAAAAAAAADBAACBQH/xAA6EAABAwIEAgYIAwkBAAAAAAABAgMEABEFEiHREzEUQVFVYZQGFRYiU1SRkzOS0iMlMjQ1QmOCocH/xAAZAQADAQEBAAAAAAAAAAAAAAAAAQIDBAX/xAAlEQABAwIFBAMAAAAAAAAAAAABAAIREvAhUWGBkQNBQuExMlL/2gAMAwEAAhEDEQA/AOluNNfjtNzFpVw0Mi8c2JF9eenOh9FY+eX5Y71SGuHHmMvLxDOltQUUiKsE/wDanEiX/qA8qveuIgr0mDE1Tx6V+isfPL8sd6bbMcR2GBKXdBUM3AOuZV+2keJE7xHlV70wphph5GecnTKuwjr5Gx7aRB7qyGDO9ldcuHGefZclOFQSto2jnQ8r86TYixX23VonLs0AVXjEczYf3VWXCYkS3nk4iEhxxSwkxVm1ze3OjwYbLUWakYgFFTaVE9HUAkJVc9evOqhsYLOqBhM3ohdFjfPL8sf1UaI3Fjy2XzMcUG1ZsojkX0I7fGl+Ex3iPKOb0RUVtDTbpxFGRzNltFX1Gx69KUFU6oDGePSAxgrTyi23iRulBVrFI0H+1EOAIV7vrLnp/LH9VHhqjR3HFrnZ8zSkACMsWJ6+dFEiMCD03r+WXScX9oU1am9kOeiMJRbVMcSppKWiBHKtUi173oQjxlMOvCevI1lzXjG/vGw0vV5rMd5b00Twhpx4pAMZZIJF7c+ygp6EIclk4j7z3DsoRV2GVRPK/jVxJTAbThN7KmaF8+55U71M0L59zyp3pfokTvQeUc3qdEid6Dyjm9FITga8elb1cjvJj7Lm1cOHtgEnE2LD/C5tWv7PTfisfU7VVfo5NUhQ4sfUEc1bUSck62fo3ss1/B+EotuYiwFWGgaWeYv/AO09KSw86lSJ7QAbQnVpfMJA7KenYJLflKcQ4yElKRqTfRIHZ4Uv7PTfisfmO1BnJYVziSlRFQW3HBPZytAKUeEvQE27O2uMuRENyULxBs8VktizDmhJGvLwp9GAzBElt8RjM6hKUm5sCFA66Uj7LYj8aL+ZW1Aboqa9vkb4S+WNr+8mvsObU7KjtNssxVzmkuMFeb9msj3iFDkOygn0WxIpI40XUEfxK2rRm4HLfmOuocZCV5bXJvokDs8KIVl7HGC4xeizkQ21ocUmezZtGdR4S9B9PGg5Y3eLX2HNq1msBmJYloLjF3WC2nU8yRz08KQPotiN/wAaL+ZW1Aapnpz8m9lwMMSsPXHaxBrOhwyFEtLACAix6qU9XI7yY+y5tWtB9HZzCny47HIcjuNjKVaFQFurlU9npvxWPqdqZkJtcweRvZZbWFB51DTeIsFazlSOCsXP0qpw1AJHrJjQ2/Bc2rchYFLZmsOrcZKULCiATe30oKvR6aVE8VjUk8ztSxyVVsn7G9l//9k=",yA="/assets/vertical_wall.a31291fe.jpg";const mA=T.from(wA),EA=T.from(yA);let Q=0;nA(A=>{Q=A});const a=new j;let P,H,u,w;const BA=A=>{a.x=A.screen.width/2,a.y=A.screen.height,u=K(-A.screen.width,0),w=K(A.screen.width,A.screen.height),a.addChild(u),a.addChild(w),A.stage.addChild(a),P=u.y,H=w.y,IA(A,a),xA(A)};function xA(A){const e=new j;[z(A),z(A),Z(A),Z(A)].forEach(o=>e.addChild(o)),A.stage.addChild(e),VA(A,e)}const LA=()=>{C&&C.stop()};let U=0,V=!1;const WA=()=>U,YA=A=>{U=0,V=!1,a.x=A.screen.width/2,a.y=A.screen.height,a.removeChild(u),a.removeChild(w),u.y=P,w.y=H,a.addChild(u),a.addChild(w),C.start()};let C;function IA(A,e){C=R.shared.add(()=>{e.y=e.y-Q;const t=e.getChildAt(0);vA(t,e),D(t,e)&&(e.removeChild(t),E(t,e,A.screen.height),e.addChild(t),V=!1)})}function vA(A,e){const t=iA(),o=A.y+e.y;t>o&&!V&&(V=!0,U+=1)}function VA(A,e){R.shared.add(()=>{e.y=e.y-Q;const t=e.getChildByName("right-wall-1"),o=e.getChildByName("left-wall-1"),l=e.getChildByName("right-wall-2"),n=e.getChildByName("left-wall-2");D(t,e)?(E(t,e,A.screen.height),E(o,e,A.screen.height)):D(l,e)&&(E(l,e,A.screen.height),E(n,e,A.screen.height))})}function D(A,e){return A.y+A.height/2+e.y<0}function E(A,e,t){A.y=t-e.y+A.height/2}let CA=0;function K(A,e){const t=new F(mA);t.name=`wall-${++CA}`,t.width=300,t.height=40,t.anchor.set(.5,.5);const o=.25,l=.6;return t.x=A*o,t.y=e*l,t}let S=0;function z(A){S+=1;const e=A.screen.width-20,o=(S-1)*A.screen.height+A.screen.height/2,l=J(e,o);return l.name=`right-wall-${S}`,l}let G=0;function Z(A){G+=1;const e=20,o=(G-1)*A.screen.height+A.screen.height/2,l=J(e,o);return l.name=`left-wall-${G}`,l}function J(A,e){const t=new F(EA);return t.width=40,t.height=444,t.anchor.set(.5,.5),t.x=A,t.y=e,t}function p(A){let e=a.getChildAt(A).getBounds();const t=e.x,o=e.y,l=e.x+e.width,n=e.y,s=e.x+e.width,i=e.y+e.height,c=e.x,d=e.y+e.height;return[t,o,l,n,s,i,c,d]}const q=["KeyA","KeyD","ArrowLeft","ArrowRight"];let f;function TA(A){f=A;const e=new k("Press A,D,<-,-> to start",{fill:"white"});e.anchor.set(.5),e.x=A.screen.width/2,e.y=A.screen.height/2,document.addEventListener("keydown",t,{once:!0}),A.stage.addChild(e);function t(o){q.indexOf(o.code)!==-1&&(sA(A),BA(A),A.stage.removeChild(e))}}function jA(){gA(),LA(),RA(WA())}function RA(A){const e="Score: "+A+`
Press A,D,<-,-> to try again`,t=new k(e,{fill:"white"});t.anchor.set(.5),t.x=f.screen.width/2,t.y=f.screen.height/2,f.stage.addChild(t),document.addEventListener("keydown",o,{once:!0});function o(l){q.indexOf(l.code)!==-1&&(rA(f),YA(f),f.stage.removeChild(t))}}const FA=tA();TA(FA);window.PIXI=AA;
