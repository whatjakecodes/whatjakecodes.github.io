var Oe=Object.defineProperty;var Me=(e,a,r)=>a in e?Oe(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r;var ve=(e,a,r)=>Me(e,typeof a!="symbol"?a+"":a,r);import{a as E,t as L,c as Re}from"../chunks/disclose-version.BdS823N6.js";import{i as He}from"../chunks/legacy.BKAuZjgz.js";import{i as I,j as Pe,d as Ke,ab as Je,ah as we,H as je,k as fe,l as re,m as te,o as W,ao as $,e as Se,g as Ce,h as Ye,N as _e,ap as pe,M as Be,aq as he,ar as ue,a2 as Q,as as Ue,a5 as Ve,at as We,au as Fe,$ as Xe,_ as ze,a3 as Ge,a7 as $e,a9 as Qe,av as de,aw as Ze,ax as ke,ay as ea,ad as aa,az as ra,aA as ta,aB as sa,aC as ia,z as na,al as la,aD as me,ak as Ne,aE as oa,p as Z,b as T,c as w,a as ee,r as y,t as J,w as u,an as F,y as H,x as oe,J as ca,f as se,aF as ua,K as ie}from"../chunks/runtime.DLzUx7Yf.js";import{d as da,l as Te,e as Ae,a as j,f as va,r as fa,s as _a,b as pa}from"../chunks/utils.BF7nJMey.js";import{p as ha,i as X}from"../chunks/props.BFfbiq1N.js";import{d as ma}from"../chunks/index.J4DuXGUT.js";function Ee(e,a){return a}function ga(e,a,r,s){for(var t=[],i=a.length,n=0;n<i;n++)Ue(a[n].e,t,!0);var v=i>0&&t.length===0&&r!==null;if(v){var h=r.parentNode;Ve(h),h.append(r),s.clear(),K(e,a[0].prev,a[i-1].next)}We(t,()=>{for(var f=0;f<i;f++){var _=a[f];v||(s.delete(_.k),K(e,_.prev,_.next)),Fe(_.e,!v)}})}function Ie(e,a,r,s,t,i=null){var n=e,v={flags:a,items:new Map,first:null},h=(a&ke)!==0;if(h){var f=e;n=I?re(Xe(f)):f.appendChild(ze())}I&&Pe();var _=null,S=!1;Ke(()=>{var k=r(),l=Je(k)?k:k==null?[]:we(k),o=l.length;if(S&&o===0)return;S=o===0;let p=!1;if(I){var O=n.data===je;O!==(o===0)&&(n=fe(),re(n),te(!1),p=!0)}if(I){for(var m=null,x,C=0;C<o;C++){if(W.nodeType===8&&W.data===Ge){n=W,p=!0,te(!1);break}var A=l[C],c=s(A,C);x=De(W,v,m,null,A,c,C,t,a,r),v.items.set(c,x),m=x}o>0&&re(fe())}if(!I){var g=$e;ba(l,v,n,t,a,(g.f&$)!==0,s,r)}i!==null&&(o===0?_?Se(_):_=Ce(()=>i(n)):_!==null&&Ye(_,()=>{_=null})),p&&te(!0),r()}),I&&(n=W)}function ba(e,a,r,s,t,i,n,v){var R,Y,B,U;var h=(t&ea)!==0,f=(t&(de|ue))!==0,_=e.length,S=a.items,k=a.first,l=k,o,p=null,O,m=[],x=[],C,A,c,g;if(h)for(g=0;g<_;g+=1)C=e[g],A=n(C,g),c=S.get(A),c!==void 0&&((R=c.a)==null||R.measure(),(O??(O=new Set)).add(c));for(g=0;g<_;g+=1){if(C=e[g],A=n(C,g),c=S.get(A),c===void 0){var ae=l?l.e.nodes_start:r;p=De(ae,a,p,p===null?a.first:p.next,C,A,g,s,t,v),S.set(A,p),m=[],x=[],l=p.next;continue}if(f&&ya(c,C,g,t),c.e.f&$&&(Se(c.e),h&&((Y=c.a)==null||Y.unfix(),(O??(O=new Set)).delete(c))),c!==l){if(o!==void 0&&o.has(c)){if(m.length<x.length){var b=x[0],d;p=b.prev;var D=m[0],P=m[m.length-1];for(d=0;d<m.length;d+=1)ge(m[d],b,r);for(d=0;d<x.length;d+=1)o.delete(x[d]);K(a,D.prev,P.next),K(a,p,D),K(a,P,b),l=b,p=P,g-=1,m=[],x=[]}else o.delete(c),ge(c,l,r),K(a,c.prev,c.next),K(a,c,p===null?a.first:p.next),K(a,p,c),p=c;continue}for(m=[],x=[];l!==null&&l.k!==A;)(i||!(l.e.f&$))&&(o??(o=new Set)).add(l),x.push(l),l=l.next;if(l===null)continue;c=l}m.push(c),p=c,l=c.next}if(l!==null||o!==void 0){for(var M=o===void 0?[]:we(o);l!==null;)(i||!(l.e.f&$))&&M.push(l),l=l.next;var N=M.length;if(N>0){var q=t&ke&&_===0?r:null;if(h){for(g=0;g<N;g+=1)(B=M[g].a)==null||B.measure();for(g=0;g<N;g+=1)(U=M[g].a)==null||U.fix()}ga(a,M,q,S)}}h&&Qe(()=>{var G;if(O!==void 0)for(c of O)(G=c.a)==null||G.apply()}),_e.first=a.first&&a.first.e,_e.last=p&&p.e}function ya(e,a,r,s){s&de&&pe(e.v,a),s&ue?pe(e.i,r):e.i=r}function De(e,a,r,s,t,i,n,v,h,f){var _=(h&de)!==0,S=(h&Ze)===0,k=_?S?Be(t):he(t):t,l=h&ue?he(n):n;Q&&_&&(k.debug=()=>{var p=typeof l=="number"?n:l.v;f()[p]});var o={i:l,v:k,k:i,a:null,e:null,prev:r,next:s};try{return o.e=Ce(()=>v(e,k,l),I),o.e.prev=r&&r.e,o.e.next=s&&s.e,r===null?a.first=o:(r.next=o,r.e.next=o.e),s!==null&&(s.prev=o,s.e.prev=o.e),o}finally{}}function ge(e,a,r){for(var s=e.next?e.next.e.nodes_start:r,t=a?a.e.nodes_start:r,i=e.e.nodes_start;i!==s;){var n=aa(i);t.before(i),i=n}}function K(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function xa(e){if(I){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var s=e.value;be(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var t=e.checked;be(e,"checked",null),e.checked=t}}};e.__on_r=r,ra(r),da()}}function be(e,a,r,s){var t=e.__attributes??(e.__attributes={});if(I&&(t[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")){wa(e,a,"");return}t[a]!==(t[a]=r)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[ta]=r),e.removeAttribute(a))}function wa(e,a,r){Q&&(a==="srcset"&&Sa(e,r)||ce(e.getAttribute(a)??"",r)||sa(a,e.outerHTML.replace(e.innerHTML,e.innerHTML&&"..."),String(r)))}function ce(e,a){return e===a?!0:new URL(e,document.baseURI).href===new URL(a,document.baseURI).href}function ye(e){return e.split(",").map(a=>a.trim().split(" ").filter(Boolean))}function Sa(e,a){var r=ye(e.srcset),s=ye(a);return s.length===r.length&&s.every(([t,i],n)=>i===r[n][1]&&(ce(r[n][0],t)||ce(t,r[n][0])))}function Ca(e,a){var r=e.__className,s=ka(a);I&&e.className===s?e.__className=s:(r!==s||I&&e.className!==s)&&(a==null?e.removeAttribute("class"):e.className=s,e.__className=s)}function ka(e){return e??""}function xe(e,a,r=a){var s=ia();Te(e,"input",t=>{Q&&e.type==="checkbox"&&me();var i=t?e.defaultValue:e.value;if(i=ne(e)?le(i):i,r(i),s&&i!==(i=a())){var n=e.selectionStart,v=e.selectionEnd;e.value=i??"",v!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(v,e.value.length))}}),(I&&e.defaultValue!==e.value||na(a)==null&&e.value)&&r(ne(e)?le(e.value):e.value),la(()=>{Q&&e.type==="checkbox"&&me();var t=a();ne(e)&&t===le(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function ne(e){var a=e.type;return a==="number"||a==="range"}function le(e){return e===""?null:+e}function qe(e,a,r){if(e.multiple)return Aa(e,a);for(var s of e.options){var t=z(s);if(oa(t,a)){s.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function Na(e,a){Ne(()=>{var r=new MutationObserver(()=>{var s=e.__value;qe(e,s)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function Ta(e,a,r=a){var s=!0;Te(e,"change",t=>{var i=t?"[selected]":":checked",n;if(e.multiple)n=[].map.call(e.querySelectorAll(i),z);else{var v=e.querySelector(i)??e.querySelector("option:not([disabled])");n=v&&z(v)}r(n)}),Ne(()=>{var t=a();if(qe(e,t,s),s&&t===void 0){var i=e.querySelector(":checked");i!==null&&(t=z(i),r(t))}e.__value=t,s=!1}),Na(e)}function Aa(e,a){for(var r of e.options)r.selected=~a.indexOf(z(r))}function z(e){return"__value"in e?e.__value:e.value}const Ea=()=>({settings:{characterClasses:[{name:"cleric"},{name:"druid"},{name:"paladin"}],message:"Welcome to Jake's character creator"}}),ir=Object.freeze(Object.defineProperty({__proto__:null,load:Ea},Symbol.toStringTag,{value:"Module"}));var Ia=(e,a)=>{a.change(e.currentTarget.value)},Da=L("<option> </option>"),qa=L('<div class="flex flex-col gap-2"><label for="class-select" class="text-sm font-medium text-gray-700">Pick a 5e Character Class</label> <select id="class-select" class="rounded-lg border-gray-300 border p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"><option disabled>Select a class...</option><!></select></div>');function La(e,a){Z(a,!0);let r=ha(a,"value",7);var s=qa(),t=T(w(s),2);t.__change=[Ia,a];var i=w(t);i.value=(i.__value=void 0)==null?"":void 0;var n=T(i);Ie(n,17,()=>a.options,Ee,(v,h)=>{var f=Da(),_={},S=w(f,!0);y(f),J(()=>{_!==(_=u(h).index)&&(f.value=(f.__value=u(h).index)==null?"":u(h).index),j(S,u(h).name)}),E(v,f)}),y(t),y(s),Ta(t,r),E(e,s),ee()}Ae(["change"]);const Oa={$schema:"http://json-schema.org/draft-07/schema#",type:"object",required:["name","hit_die","proficiencies","saving_throws","starting_equipment"],properties:{name:{type:"string",description:"The name of the class"},hit_die:{type:"number",enum:[6,8,10,12],description:"The hit die for the class (d6, d8, d10, or d12)"},proficiencies:{type:"array",items:{type:"object",required:["name"],properties:{name:{type:"string",description:"Name of the proficiency"}}}},saving_throws:{type:"array",items:{type:"string",enum:["STR","DEX","CON","INT","WIS","CHA"]},minItems:2,maxItems:2,description:"The two ability scores this class has saving throw proficiency in"},starting_equipment:{type:"array",items:{type:"object",required:["equipment","quantity"],properties:{equipment:{type:"string",description:"Name of the equipment"},quantity:{type:"integer",minimum:1,description:"Number of this item"}}}},spellcasting:{type:"object",properties:{ability:{type:"string",enum:["INT","WIS","CHA"],description:"The spellcasting ability for this class"},cantrips_known:{type:"integer",minimum:0,description:"Number of cantrips known at 1st level"},spells_known:{type:"integer",minimum:0,description:"Number of spells known at 1st level"},spell_slots:{type:"object",properties:{level_1:{type:"integer",minimum:0,description:"Number of 1st level spell slots"}}}}},subclass:{type:"string",description:"The name of the subclass (if chosen at 1st level)"}}},Ma=e=>`You are a D&D 5e character creation assistant. Generate a character class that matches the user's description, following these requirements EXACTLY:
1. Return ONLY valid JSON matching this schema: ${JSON.stringify(e)}
2. Do not include any text before or after the JSON
3. Do not include any explanations
4. Ensure the JSON is properly formatted and can be parsed directly
5. All properties must exactly match the schema - do not add extra fields
6. Class Name field must be a single word. Instead of "Pyromaniac Solder", you might do "Pyrosoldier"`,Ra=(e,a,r)=>({method:"POST",headers:{"Content-Type":"application/json","x-api-key":e,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-3-haiku-20240307",max_tokens:4096,system:Ma(a),messages:[{role:"user",content:r}]})});class Ha{constructor(a){ve(this,"apiKey");this.apiKey=a}async createCharacter(a){try{const s=Ra(this.apiKey,Oa,a),t=await fetch("https://api.anthropic.com/v1/messages",s);if(!t.ok){var r=await t.text();throw new Error(`HTTP ${t.statusText}: ${r}`)}const i=await t.json();return console.log("claude response data: ",{data:i}),JSON.parse(i.content[0].text)}catch(s){throw console.error("Error creating character:",s),s}}}const Pa=async(e,a)=>await new Ha(a).createCharacter(e);var Ka=L('<div class="text-red-600 font-medium bg-red-50 p-4 rounded-lg"> </div>'),Ja=L('<form class="bg-white rounded-xl shadow-md p-6"><div class="space-y-6"><div class="flex flex-col gap-2"><label for="apiKey" class="text-sm font-medium text-gray-700">API Key</label> <input type="password" id="apiKey" placeholder="Enter your Anthropic API key" class="rounded-lg border-gray-300 border p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div class="flex flex-col gap-2"><label for="message" class="text-sm font-medium text-gray-700">Describe your character</label> <textarea id="message" rows="4" placeholder="Enter a character class description" class="rounded-lg border-gray-300 border p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea></div> <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-medium py-2 px-4 rounded-lg transition-colors"> </button> <!></div></form>');function ja(e,a){Z(a,!0);let r=F(""),s=F(""),t=F(!1),i=F("");async function n(m){m.preventDefault(),H(t,!0),H(i,"");try{const x=await Pa(u(s),u(r));a.create(x)}catch(x){x instanceof Error&&H(i,oe(x.message))}finally{H(t,!1)}}var v=Ja(),h=w(v),f=w(h),_=T(w(f),2);xa(_),y(f);var S=T(f,2),k=T(w(S),2);fa(k),y(S);var l=T(S,2),o=w(l,!0);y(l);var p=T(l,2);{var O=m=>{var x=Ka(),C=w(x);y(x),J(()=>j(C,`Error: ${u(i)??""}`)),E(m,x)};X(p,m=>{u(i).trim().length>0&&m(O)})}y(h),y(v),J(()=>{l.disabled=u(t),j(o,u(t)?"Sending...":"Generate Class")}),va("submit",v,n),xe(_,()=>u(r),m=>H(r,m)),xe(k,()=>u(s),m=>H(s,m)),E(e,v),ee()}var Ya=(e,a,r)=>a(r()),Ba=L("<button> </button>"),Ua=L('<div class="flex flex-wrap gap-4 p-4"></div>');function Va(e,a){Z(a,!0);let r=F(oe(new Set));function s(i){H(r,oe(u(r).has(i)?new Set([...u(r)].filter(n=>n!==i)):new Set([...u(r),i].slice(-2)))),a.onChange([...u(r)])}var t=Ua();Ie(t,21,()=>a.options,Ee,(i,n)=>{let v=()=>u(n).name,h=()=>u(n).index;var f=Ba();f.__click=[Ya,s,h];const _=ca(()=>`px-4 py-2 rounded-lg font-medium transition-all duration-200
        ${(u(r).has(h())?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300")??""}`);var S=w(f,!0);y(f),J(()=>{Ca(f,u(_)),j(S,v())}),E(i,f)}),y(t),E(e,t),ee()}Ae(["click"]);function Wa(e){return{CHA:"Charisma",CON:"Constitution",DEX:"Dexterity",INT:"Intelligence",STR:"Strength",WIS:"Wisdom"}[e]}var Fa=L('<div class="flex flex-col gap-2"><p> </p></div> <div class="flex flex-col gap-2"><p> </p></div> <div class="flex flex-col gap-2"><p> </p></div>',1),Xa=L("<div>Loading classes...</div>"),za=L('<div class="text-red-600"> </div>'),Ga=L("<!> <!>",1),$a=L('<div class="min-h-screen p-4 md:p-8 bg-gray-50"><div class="max-w-7xl mx-auto"><div class="flex flex-col lg:flex-row lg:gap-12"><div class="lg:w-1/2 mb-8 lg:mb-0"><h1 class="text-3xl font-bold mb-8 text-gray-800">Create a D&D Character</h1> <div class="space-y-6"><div class="flex flex-col gap-2"><label for="char-name" class="text-sm font-medium text-gray-700">Character Name</label> <input id="char-name" type="text" class="rounded-lg border-gray-300 border p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <!></div></div> <div class="lg:w-1/2"><div class="bg-white rounded-xl shadow-md p-6 mb-6"><!></div> <p class="p-1 mb-1">Alternatively, generate a class with an LLM:</p> <!></div></div></div></div>');function nr(e,a){Z(a,!1);const r=_a(),s=()=>pa(ma,"$dndSRDStore",r);let t=ua();const i=b=>{H(t,s().characterCreator.getClass(b))},n=b=>{H(t,b)};function v(){return u(t)?u(t).skill_proficiency_choices.flatMap(d=>d.from.options).map(d=>{var D;return(D=d.item)==null?void 0:D.name.replace("Skill: ","")}).join(", "):""}function h(b){return b.skill_proficiency_choices.flatMap(d=>d.from.options).filter(d=>d.item!=null).map(d=>({name:d.item.name.replace("Skill: ",""),index:d.item.index}))}const f=b=>{};function _(b){return b.saving_throws.map(d=>Wa(d.name)).join(", ")}He();var S=$a(),k=w(S),l=w(k),o=w(l),p=T(w(o),2),O=T(w(p),2);{var m=b=>{var d=Fa(),D=se(d),P=w(D),M=w(P);y(P),y(D);var N=T(D,2),q=w(N),R=w(q);J(()=>j(R,`Skill Choices: ${v()??""}`)),y(q),y(N);var Y=T(N,2),B=w(Y),U=w(B);J(()=>j(U,`Saving Throw Proficiencies: ${_(u(t))??""}`)),y(B),y(Y),J(()=>j(M,`Selected Class: ${u(t).name??""}`)),E(b,d)};X(O,b=>{u(t)&&b(m)})}y(p),y(o);var x=T(o,2),C=w(x),A=w(C);{var c=b=>{var d=Xa();E(b,d)},g=b=>{var d=Re(),D=se(d);{var P=N=>{var q=za(),R=w(q,!0);y(q),J(()=>j(R,s().error)),E(N,q)},M=N=>{var q=Ga(),R=se(q),Y=ie(()=>s().characterCreator.getClassList()),B=ie(()=>{var V;return(V=u(t))==null?void 0:V.index});La(R,{get options(){return u(Y)},get value(){return u(B)},change:i});var U=T(R,2);{var G=V=>{var Le=ie(()=>h(u(t)));Va(V,{get options(){return u(Le)},onChange:f})};X(U,V=>{u(t)&&V(G)})}E(N,q)};X(D,N=>{s().error?N(P):N(M,!1)},!0)}E(b,d)};X(A,b=>{s().loading?b(c):b(g,!1)})}y(C);var ae=T(C,4);ja(ae,{create:n}),y(x),y(l),y(k),y(S),E(e,S),ee()}export{nr as component,ir as universal};
