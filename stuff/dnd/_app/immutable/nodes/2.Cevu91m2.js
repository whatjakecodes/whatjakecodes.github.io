var z=Object.defineProperty;var F=(e,a,r)=>a in e?z(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r;var K=(e,a,r)=>F(e,typeof a!="symbol"?a+"":a,r);import{a as P,t as R}from"../chunks/disclose-version.DnveNlGR.js";import"../chunks/legacy.Di1klDEM.js";import{h as C,a1 as V,a2 as X,a3 as B,j as Q,a4 as U,t as Z,w as J,x as ee,m as c,F as u,y as l,A as d,z as n,a5 as p}from"../chunks/runtime.Ca52a4Bo.js";import{a as ae,l as re,e as te,r as se,s as $}from"../chunks/render.CDSu9Yn-.js";import{i as ie}from"../chunks/if.Bh2D8KSG.js";import{i as oe}from"../chunks/lifecycle.Bm75_ybb.js";function L(e){if(C){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var o=e.value;M(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var t=e.checked;M(e,"checked",null),e.checked=t}}};e.__on_r=r,V(r),ae()}}function M(e,a,r,o){var t=e.__attributes??(e.__attributes={});C&&(t[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||t[a]!==(t[a]=r)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[X]=r),e.removeAttribute(a))}function w(e,a,r=a){var o=B();re(e,"input",t=>{var s=t?e.defaultValue:e.value;if(s=N(e)?k(s):s,r(s),o&&s!==(s=a())){var m=e.selectionStart,f=e.selectionEnd;e.value=s??"",f!==null&&(e.selectionStart=m,e.selectionEnd=Math.min(f,e.value.length))}}),(C&&e.defaultValue!==e.value||Q(a)==null&&e.value)&&r(N(e)?k(e.value):e.value),U(()=>{var t=a();N(e)&&t===k(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function N(e){var a=e.type;return a==="number"||a==="range"}function k(e){return e===""?null:+e}function le(e){return function(...a){var r=a[0];return r.preventDefault(),e==null?void 0:e.apply(this,a)}}const ne=()=>({settings:{characterClasses:[{name:"cleric"},{name:"druid"},{name:"paladin"}],message:"Welcome to Jake's character creator"}}),Ne=Object.freeze(Object.defineProperty({__proto__:null,load:ne},Symbol.toStringTag,{value:"Module"})),ce={$schema:"http://json-schema.org/draft-07/schema#",type:"object",required:["name","hit_die","proficiencies","saving_throws","starting_equipment"],properties:{name:{type:"string",description:"The name of the class"},hit_die:{type:"number",enum:[6,8,10,12],description:"The hit die for the class (d6, d8, d10, or d12)"},proficiencies:{type:"array",items:{type:"object",required:["name"],properties:{name:{type:"string",description:"Name of the proficiency"}}}},saving_throws:{type:"array",items:{type:"string",enum:["STR","DEX","CON","INT","WIS","CHA"]},minItems:2,maxItems:2,description:"The two ability scores this class has saving throw proficiency in"},starting_equipment:{type:"array",items:{type:"object",required:["equipment","quantity"],properties:{equipment:{type:"string",description:"Name of the equipment"},quantity:{type:"integer",minimum:1,description:"Number of this item"}}}},spellcasting:{type:"object",properties:{ability:{type:"string",enum:["INT","WIS","CHA"],description:"The spellcasting ability for this class"},cantrips_known:{type:"integer",minimum:0,description:"Number of cantrips known at 1st level"},spells_known:{type:"integer",minimum:0,description:"Number of spells known at 1st level"},spell_slots:{type:"object",properties:{level_1:{type:"integer",minimum:0,description:"Number of 1st level spell slots"}}}}},subclass:{type:"string",description:"The name of the subclass (if chosen at 1st level)"}}},de=e=>`You are a D&D 5e character creation assistant. Generate a character class that matches the user's description, following these requirements EXACTLY:
1. Return ONLY valid JSON matching this schema: ${JSON.stringify(e)}
2. Do not include any text before or after the JSON
3. Do not include any explanations
4. Ensure the JSON is properly formatted and can be parsed directly
5. All properties must exactly match the schema - do not add extra fields
6. Class Name field must be a single word. Instead of "Pyromaniac Solder", you might do "Pyrosoldier"`,ue=(e,a,r)=>({method:"POST",headers:{"Content-Type":"application/json","x-api-key":e,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-3-haiku-20240307",max_tokens:4096,system:de(a),messages:[{role:"user",content:r}]})});class me{constructor(a){K(this,"apiKey");this.apiKey=a}async createCharacter(a){try{const o=ue(this.apiKey,ce,a),t=await fetch("https://api.anthropic.com/v1/messages",o);if(!t.ok){var r=await t.text();throw new Error(`HTTP ${t.statusText}: ${r}`)}const s=await t.json();return console.log("claude response data: ",{data:s}),JSON.parse(s.content[0].text)}catch(o){throw console.error("Error creating character:",o),o}}}const pe=async(e,a)=>await new me(a).createCharacter(e);var fe=R('<div class="text-red-600 font-medium bg-red-50 p-4 rounded-lg"> </div>'),ve=R('<div class="min-h-screen p-4 md:p-8 bg-gray-50"><div class="max-w-7xl mx-auto"><div class="flex flex-col lg:flex-row lg:gap-12"><div class="lg:w-1/2 mb-8 lg:mb-0"><h1 class="text-3xl font-bold mb-8 text-gray-800">Create a D&D Character</h1> <div class="space-y-6"><div class="flex flex-col gap-2"><label for="char-name" class="text-sm font-medium text-gray-700">Character Name</label> <input id="char-name" type="text" class="rounded-lg border-gray-300 border p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div class="flex flex-col gap-2"><label for="char-class" class="text-sm font-medium text-gray-700">Class</label> <input id="char-class" type="text" class="rounded-lg border-gray-300 border p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div></div> <div class="lg:w-1/2"><form class="bg-white rounded-xl shadow-md p-6"><div class="space-y-6"><div class="flex flex-col gap-2"><label for="apiKey" class="text-sm font-medium text-gray-700">API Key</label> <input type="password" id="apiKey" placeholder="Enter your Anthropic API key" class="rounded-lg border-gray-300 border p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div class="flex flex-col gap-2"><label for="message" class="text-sm font-medium text-gray-700">Describe your character</label> <textarea id="message" rows="4" placeholder="Enter a character class description" class="rounded-lg border-gray-300 border p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea></div> <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-medium py-2 px-4 rounded-lg transition-colors"> </button> <!></div></form></div></div></div></div>');function ke(e,a){Z(a,!1);let r=p("Warlock"),o=p(""),t=p(""),s=p(!1),m=p("");async function f(){u(s,!0),u(m,"");try{const i=await pe(c(t),c(o));u(r,i.name)}catch(i){i instanceof Error&&u(m,i.message)}finally{u(s,!1)}}oe();var h=ve(),S=l(h),D=l(S),y=l(D),T=d(l(y),2),q=d(l(T),2),A=d(l(q),2);L(A),n(q),n(T),n(y);var O=d(y,2),g=l(O),I=l(g),b=l(I),j=d(l(b),2);L(j),n(b);var _=d(b,2),E=d(l(_),2);se(E),n(_);var v=d(_,2),W=l(v,!0);n(v);var Y=d(v,2);{var G=i=>{var x=fe(),H=l(x);n(x),J(()=>$(H,`Error: ${c(m)??""}`)),P(i,x)};ie(Y,i=>{c(m).trim().length>0&&i(G)})}n(I),n(g),n(O),n(D),n(S),n(h),J(()=>{v.disabled=c(s),$(W,c(s)?"Sending...":"Generate Class")}),w(A,()=>c(r),i=>u(r,i)),w(j,()=>c(o),i=>u(o,i)),w(E,()=>c(t),i=>u(t,i)),te("submit",g,le(f)),P(e,h),ee()}export{ke as component,Ne as universal};
